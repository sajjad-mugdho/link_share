"use client";
import { useState, useEffect } from "react";
import Link from "next/link";
import { usePathname } from "next/navigation";
import "./NavBar.css";
import LogoutButton from "@/app/components/LogoutButton";
import Spinner from "../components/Spinner";
import Image from "next/image";
import logo from "../../../public/kahf-logo-new1.svg";

const NavBar = () => {
  const [buttonStyle, setButtonStyle] = useState("");
  const pathname = usePathname();
  const [loading, setLoading] = useState(false);

  useEffect(() => {
    setLoading(false);
    const pathName = pathname.slice(1);
    if (pathName === "links") setButtonStyle("links");
    else if (pathName === "links/profile") setButtonStyle("profile");
    else if (pathName === "preview") setButtonStyle("preview");
  }, [pathname]);

  return (
    <div className="navbarContainer">
      <div className="navbar">
        {loading ? (
          <Spinner color="black" />
        ) : (
          <div className="logoBar">
            <Image
              className="logo"
              src={logo}
              alt="logo"
              width={200}
              height={100}
            />
          </div>
        )}
        <div className="middleLinks">
          <Link
            href="/links"
            className={`${
              buttonStyle === "links" ? "activeButton" : "linksButton"
            }`}
            onClick={() => {
              setButtonStyle("links");
              setLoading(true);
            }}
          >
            {buttonStyle === "links" ? (
              <div>
                <p className="navbarLogoLinkText purpleText">Links</p>{" "}
                <svg
                  className="linkButtonLogo"
                  xmlns="http://www.w3.org/2000/svg"
                  width="17"
                  height="16"
                  viewBox="0 0 17 16"
                  fill="none"
                >
                  <path
                    d="M9.15399 12.6508C9.24139 12.7379 9.31074 12.8413 9.35806 12.9553C9.40537 13.0693 9.42973 13.1914 9.42973 13.3148C9.42973 13.4382 9.40537 13.5604 9.35806 13.6743C9.31074 13.7883 9.24139 13.8918 9.15399 13.9789L8.68993 14.4429C7.81057 15.3223 6.61791 15.8163 5.3743 15.8163C4.1307 15.8163 2.93804 15.3223 2.05868 14.4429C1.17932 13.5636 0.685303 12.3709 0.685303 11.1273C0.685303 9.88372 1.17932 8.69105 2.05868 7.81169L3.94305 5.9281C4.78796 5.0811 5.92476 4.58921 7.12057 4.55319C8.31639 4.51717 9.48073 4.93974 10.3751 5.73435C10.4674 5.81642 10.5427 5.91588 10.5966 6.02705C10.6505 6.13821 10.682 6.2589 10.6892 6.38223C10.6965 6.50556 10.6794 6.62911 10.6389 6.74582C10.5984 6.86254 10.5353 6.97014 10.4532 7.06247C10.3711 7.15481 10.2717 7.23007 10.1605 7.28397C10.0493 7.33787 9.92866 7.36934 9.80533 7.3766C9.682 7.38385 9.55845 7.36675 9.44174 7.32625C9.32502 7.28576 9.21742 7.22267 9.12509 7.1406C8.58877 6.66429 7.89074 6.4109 7.17377 6.43224C6.4568 6.45359 5.77508 6.74807 5.26805 7.25544L3.38524 9.13669C2.85771 9.66422 2.56135 10.3797 2.56135 11.1258C2.56135 11.8718 2.85771 12.5873 3.38524 13.1148C3.91277 13.6423 4.62826 13.9387 5.3743 13.9387C6.12035 13.9387 6.83583 13.6423 7.36337 13.1148L7.82743 12.6508C7.9145 12.5636 8.01789 12.4944 8.1317 12.4473C8.24551 12.4001 8.36751 12.3758 8.49071 12.3758C8.61391 12.3758 8.73591 12.4001 8.84972 12.4473C8.96353 12.4944 9.06692 12.5636 9.15399 12.6508ZM14.9415 1.557C14.0614 0.678998 12.869 0.185913 11.6259 0.185913C10.3827 0.185913 9.19032 0.678998 8.31024 1.557L7.84618 2.02107C7.67006 2.19719 7.57112 2.43606 7.57112 2.68513C7.57112 2.9342 7.67006 3.17307 7.84618 3.34919C8.0223 3.52531 8.26117 3.62426 8.51024 3.62426C8.75931 3.62426 8.99818 3.52531 9.1743 3.34919L9.63837 2.88513C10.1659 2.3576 10.8814 2.06123 11.6274 2.06123C12.3735 2.06123 13.089 2.3576 13.6165 2.88513C14.144 3.41266 14.4404 4.12815 14.4404 4.87419C14.4404 5.62023 14.144 6.33572 13.6165 6.86325L11.7329 8.74763C11.2254 9.25479 10.5433 9.54884 9.82618 9.56961C9.10903 9.59038 8.41105 9.33629 7.87509 8.85935C7.78275 8.77727 7.67515 8.71419 7.55844 8.67369C7.44172 8.6332 7.31817 8.61609 7.19484 8.62335C7.07152 8.6306 6.95082 8.66208 6.83966 8.71597C6.7285 8.76987 6.62904 8.84514 6.54696 8.93747C6.46488 9.02981 6.4018 9.13741 6.36131 9.25412C6.32081 9.37084 6.30371 9.49439 6.31096 9.61772C6.31821 9.74104 6.34969 9.86173 6.40359 9.9729C6.45748 10.0841 6.53275 10.1835 6.62509 10.2656C7.51882 11.06 8.68238 11.4829 9.87763 11.4476C11.0729 11.4123 12.2095 10.9215 13.0548 10.0758L14.9391 8.19216C15.8182 7.3123 16.3121 6.11957 16.3126 4.87585C16.313 3.63212 15.8199 2.43905 14.9415 1.55857V1.557Z"
                    fill="#633CFF"
                  />
                </svg>
              </div>
            ) : (
              <div>
                <p className="navbarLogoLinkText">Links</p>
                <svg
                  className="linkButtonLogo"
                  xmlns="http://www.w3.org/2000/svg"
                  width="17"
                  height="16"
                  viewBox="0 0 17 16"
                  fill="none"
                >
                  <path
                    d="M9.15387 12.6508C9.24127 12.7379 9.31062 12.8413 9.35793 12.9553C9.40525 13.0693 9.42961 13.1914 9.42961 13.3148C9.42961 13.4382 9.40525 13.5604 9.35793 13.6743C9.31062 13.7883 9.24127 13.8918 9.15387 13.9789L8.68981 14.4429C7.81045 15.3223 6.61778 15.8163 5.37418 15.8163C4.13058 15.8163 2.93792 15.3223 2.05856 14.4429C1.1792 13.5636 0.685181 12.3709 0.685181 11.1273C0.685181 9.88372 1.1792 8.69105 2.05856 7.81169L3.94293 5.9281C4.78784 5.0811 5.92463 4.58921 7.12045 4.55319C8.31627 4.51717 9.4806 4.93974 10.375 5.73435C10.4673 5.81642 10.5426 5.91588 10.5965 6.02705C10.6504 6.13821 10.6818 6.2589 10.6891 6.38223C10.6963 6.50556 10.6792 6.62911 10.6387 6.74582C10.5983 6.86254 10.5352 6.97014 10.4531 7.06247C10.371 7.15481 10.2716 7.23007 10.1604 7.28397C10.0492 7.33787 9.92853 7.36934 9.80521 7.3766C9.68188 7.38385 9.55833 7.36675 9.44161 7.32625C9.3249 7.28576 9.2173 7.22267 9.12496 7.1406C8.58865 6.66429 7.89062 6.4109 7.17365 6.43224C6.45668 6.45359 5.77496 6.74807 5.26793 7.25544L3.38512 9.13669C2.85759 9.66422 2.56122 10.3797 2.56122 11.1258C2.56122 11.8718 2.85759 12.5873 3.38512 13.1148C3.91265 13.6423 4.62814 13.9387 5.37418 13.9387C6.12023 13.9387 6.83571 13.6423 7.36324 13.1148L7.82731 12.6508C7.91438 12.5636 8.01777 12.4944 8.13158 12.4473C8.24539 12.4001 8.36739 12.3758 8.49059 12.3758C8.61379 12.3758 8.73578 12.4001 8.8496 12.4473C8.96341 12.4944 9.0668 12.5636 9.15387 12.6508ZM14.9414 1.557C14.0613 0.678998 12.8689 0.185913 11.6257 0.185913C10.3826 0.185913 9.1902 0.678998 8.31012 1.557L7.84606 2.02107C7.66994 2.19719 7.57099 2.43606 7.57099 2.68513C7.57099 2.9342 7.66994 3.17307 7.84606 3.34919C8.02218 3.52531 8.26105 3.62426 8.51012 3.62426C8.75919 3.62426 8.99806 3.52531 9.17418 3.34919L9.63825 2.88513C10.1658 2.3576 10.8813 2.06123 11.6273 2.06123C12.3734 2.06123 13.0888 2.3576 13.6164 2.88513C14.1439 3.41266 14.4403 4.12815 14.4403 4.87419C14.4403 5.62023 14.1439 6.33572 13.6164 6.86325L11.7328 8.74763C11.2253 9.25479 10.5432 9.54884 9.82606 9.56961C9.10891 9.59038 8.41093 9.33629 7.87496 8.85935C7.78263 8.77727 7.67503 8.71419 7.55831 8.67369C7.4416 8.6332 7.31805 8.61609 7.19472 8.62335C7.07139 8.6306 6.9507 8.66208 6.83954 8.71597C6.72837 8.76987 6.62891 8.84514 6.54684 8.93747C6.46476 9.02981 6.40168 9.13741 6.36118 9.25412C6.32069 9.37084 6.30358 9.49439 6.31084 9.61772C6.31809 9.74104 6.34957 9.86173 6.40346 9.9729C6.45736 10.0841 6.53263 10.1835 6.62496 10.2656C7.5187 11.06 8.68225 11.4829 9.87751 11.4476C11.0728 11.4123 12.2093 10.9215 13.0547 10.0758L14.939 8.19216C15.8181 7.3123 16.312 6.11957 16.3125 4.87585C16.3129 3.63212 15.8198 2.43905 14.9414 1.55857V1.557Z"
                    fill="#737373"
                  />
                </svg>
              </div>
            )}
            <p className="navBarText">Links</p>
          </Link>
          <Link
            href="/links/profile"
            className={`${
              buttonStyle === "profile" ? "activeButton" : "linksButton"
            }`}
            onClick={() => {
              setButtonStyle("profile");
              setLoading(true);
            }}
          >
            {buttonStyle === "profile" ? (
              <div>
                <p className="navbarLogoLinkText purpleText">Profile</p>
                <svg
                  className="profileButtonLogo"
                  xmlns="http://www.w3.org/2000/svg"
                  width="21"
                  height="20"
                  viewBox="0 0 21 20"
                  fill="none"
                >
                  <path
                    d="M10.5 1.5625C8.83122 1.5625 7.19992 2.05735 5.81238 2.98448C4.42484 3.9116 3.34338 5.22936 2.70477 6.77111C2.06616 8.31286 1.89907 10.0094 2.22463 11.6461C2.55019 13.2828 3.35379 14.7862 4.53379 15.9662C5.7138 17.1462 7.21721 17.9498 8.85393 18.2754C10.4906 18.6009 12.1871 18.4338 13.7289 17.7952C15.2706 17.1566 16.5884 16.0752 17.5155 14.6876C18.4427 13.3001 18.9375 11.6688 18.9375 10C18.935 7.763 18.0453 5.61833 16.4635 4.03653C14.8817 2.45473 12.737 1.56498 10.5 1.5625ZM6.71641 15.357C7.15163 14.7619 7.72107 14.2779 8.37849 13.9442C9.0359 13.6106 9.76276 13.4367 10.5 13.4367C11.2373 13.4367 11.9641 13.6106 12.6215 13.9442C13.2789 14.2779 13.8484 14.7619 14.2836 15.357C13.1778 16.1412 11.8556 16.5625 10.5 16.5625C9.14436 16.5625 7.82221 16.1412 6.71641 15.357ZM8.3125 9.375C8.3125 8.94235 8.4408 8.51942 8.68116 8.15969C8.92153 7.79996 9.26317 7.51958 9.66288 7.35401C10.0626 7.18845 10.5024 7.14513 10.9268 7.22953C11.3511 7.31394 11.7409 7.52228 12.0468 7.8282C12.3527 8.13413 12.5611 8.52391 12.6455 8.94824C12.7299 9.37257 12.6866 9.81241 12.521 10.2121C12.3554 10.6118 12.075 10.9535 11.7153 11.1938C11.3556 11.4342 10.9327 11.5625 10.5 11.5625C9.91984 11.5625 9.36344 11.332 8.95321 10.9218C8.54297 10.5116 8.3125 9.95516 8.3125 9.375ZM15.6563 14.0578C15.0486 13.2849 14.2741 12.6595 13.3906 12.2281C13.9537 11.658 14.3355 10.934 14.4881 10.1474C14.6408 9.36074 14.5573 8.54653 14.2484 7.80718C13.9394 7.06783 13.4187 6.43637 12.7517 5.99223C12.0847 5.5481 11.3013 5.31112 10.5 5.31112C9.69869 5.31112 8.91528 5.5481 8.24831 5.99223C7.58135 6.43637 7.06062 7.06783 6.75165 7.80718C6.44267 8.54653 6.35925 9.36074 6.51187 10.1474C6.66449 10.934 7.04634 11.658 7.60938 12.2281C6.72592 12.6595 5.9514 13.2849 5.34375 14.0578C4.58051 13.0903 4.10512 11.9274 3.972 10.7022C3.83888 9.47711 4.05341 8.23925 4.59104 7.13037C5.12867 6.02148 5.96767 5.08639 7.01199 4.43212C8.05631 3.77786 9.26375 3.43086 10.4961 3.43086C11.7284 3.43086 12.9359 3.77786 13.9802 4.43212C15.0245 5.08639 15.8635 6.02148 16.4012 7.13037C16.9388 8.23925 17.1533 9.47711 17.0202 10.7022C16.8871 11.9274 16.4117 13.0903 15.6484 14.0578H15.6563Z"
                    fill="#633CFF"
                  />
                </svg>
              </div>
            ) : (
              <div>
                <p className="navbarLogoLinkText">Profile</p>
                <svg
                  className="profileButtonLogo"
                  xmlns="http://www.w3.org/2000/svg"
                  width="17"
                  height="18"
                  viewBox="0 0 17 18"
                  fill="none"
                >
                  <path
                    d="M8.5 0.5625C6.83122 0.5625 5.19992 1.05735 3.81238 1.98448C2.42484 2.9116 1.34338 4.22936 0.70477 5.77111C0.0661559 7.31286 -0.100935 9.00936 0.224628 10.6461C0.550191 12.2828 1.35379 13.7862 2.53379 14.9662C3.7138 16.1462 5.21721 16.9498 6.85393 17.2754C8.49064 17.6009 10.1871 17.4338 11.7289 16.7952C13.2706 16.1566 14.5884 15.0752 15.5155 13.6876C16.4427 12.3001 16.9375 10.6688 16.9375 9C16.935 6.763 16.0453 4.61833 14.4635 3.03653C12.8817 1.45473 10.737 0.564981 8.5 0.5625ZM4.71641 14.357C5.15163 13.7619 5.72107 13.2779 6.37849 12.9442C7.0359 12.6106 7.76276 12.4367 8.5 12.4367C9.23725 12.4367 9.9641 12.6106 10.6215 12.9442C11.2789 13.2779 11.8484 13.7619 12.2836 14.357C11.1778 15.1412 9.85565 15.5625 8.5 15.5625C7.14436 15.5625 5.82221 15.1412 4.71641 14.357ZM6.3125 8.375C6.3125 7.94235 6.4408 7.51942 6.68116 7.15969C6.92153 6.79996 7.26317 6.51958 7.66288 6.35401C8.0626 6.18845 8.50243 6.14513 8.92676 6.22953C9.3511 6.31394 9.74087 6.52228 10.0468 6.8282C10.3527 7.13413 10.5611 7.52391 10.6455 7.94824C10.7299 8.37257 10.6866 8.81241 10.521 9.21212C10.3554 9.61183 10.075 9.95347 9.71531 10.1938C9.35558 10.4342 8.93265 10.5625 8.5 10.5625C7.91984 10.5625 7.36344 10.332 6.95321 9.9218C6.54297 9.51156 6.3125 8.95516 6.3125 8.375ZM13.6563 13.0578C13.0486 12.2849 12.2741 11.6595 11.3906 11.2281C11.9537 10.658 12.3355 9.93402 12.4881 9.14738C12.6408 8.36074 12.5573 7.54653 12.2484 6.80718C11.9394 6.06783 11.4187 5.43637 10.7517 4.99223C10.0847 4.5481 9.30132 4.31112 8.5 4.31112C7.69869 4.31112 6.91528 4.5481 6.24831 4.99223C5.58135 5.43637 5.06062 6.06783 4.75165 6.80718C4.44267 7.54653 4.35925 8.36074 4.51187 9.14738C4.66449 9.93402 5.04634 10.658 5.60938 11.2281C4.72592 11.6595 3.9514 12.2849 3.34375 13.0578C2.58051 12.0903 2.10512 10.9274 1.972 9.70225C1.83888 8.47711 2.05341 7.23925 2.59104 6.13037C3.12867 5.02148 3.96767 4.08639 5.01199 3.43212C6.05631 2.77786 7.26375 2.43086 8.4961 2.43086C9.72844 2.43086 10.9359 2.77786 11.9802 3.43212C13.0245 4.08639 13.8635 5.02148 14.4012 6.13037C14.9388 7.23925 15.1533 8.47711 15.0202 9.70225C14.8871 10.9274 14.4117 12.0903 13.6484 13.0578H13.6563Z"
                    fill="#737373"
                  />
                </svg>
              </div>
            )}
            <p className="navBarText text-nowrap">Profile Details</p>
          </Link>
          <div className="preview">
            <Link
              href="/preview"
              className={`${
                buttonStyle === "preview" ? "activeButton" : "linksButton"
              }`}
              onClick={() => {
                setButtonStyle("preview");
                setLoading(true);
              }}
            >
              <svg
                className="previewEye"
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                fill="none"
                viewBox="0 0 20 20"
              >
                <path
                  fill="#737373"
                  d="M19.61 9.62c-.03-.064-.714-1.583-2.225-3.095-2.023-2.02-4.572-3.088-7.385-3.088-2.812 0-5.362 1.068-7.382 3.088C1.106 8.037.422 9.556.391 9.62a.944.944 0 0 0 0 .761c.029.064.713 1.583 2.226 3.095 2.021 2.02 4.57 3.086 7.383 3.086 2.813 0 5.362-1.067 7.381-3.086 1.513-1.512 2.197-3.03 2.226-3.095a.946.946 0 0 0 .003-.761Zm-3.599 2.578c-1.677 1.651-3.7 2.49-6.01 2.49-2.313 0-4.334-.839-6.01-2.491A10.185 10.185 0 0 1 2.307 10a10.192 10.192 0 0 1 1.686-2.196C5.667 6.15 7.688 5.312 10 5.312s4.333.839 6.009 2.492c.659.652 1.226 1.39 1.685 2.196a10.19 10.19 0 0 1-1.685 2.197h.002Zm-6.01-5.636a3.438 3.438 0 1 0 0 6.876 3.438 3.438 0 0 0 0-6.876Zm0 5A1.562 1.562 0 1 1 10 8.438a1.562 1.562 0 0 1 0 3.124Z"
                />
              </svg>
              <p className="navBarText previewText">Preview</p>
            </Link>
          </div>
        </div>
        <LogoutButton />
      </div>
    </div>
  );
};

export default NavBar;
